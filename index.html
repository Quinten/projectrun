<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Project Run</title><!-- Vul hier de titel van je spel in. (Is de blauwe link in Google) -->
        <meta name="author" content="Quinten Clause" /><!-- Vul hier je naam in. -->
        <meta name="description" content="Bouw je eigen loop en spring spel!" /><!-- Dit is de grijze omschrijving in Google. -->
        <meta name="keywords" content="spel,game,lopen,springen" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0, user-scalable=no" />
        <meta name="HandheldFriendly" content="True" />
        <meta name="X-UA-Compatible" content="IE=9" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <link rel="apple-touch-icon-precomposed" href="assets/icons/touch-icon.png" /><!-- Dit is het icoontje van je spel als je het toevoegt aan het homescreen van een iphone of ipad -->
        <link rel="icon" href="assets/icons/favicon.png" type="image/png" /><!-- Dit is het icoontje in een desktop browser tabblad -->
        <style>
            body {
                margin: 0;
                background: #073642; /* Dit is de kleur van de achtergond rondom het spel.  */
                color: #839496; /* Dit is de kleur van de text onder het spel. */
                font-family: monospace;
            }
            #wrapper{
                width: 320px;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            <canvas id="c"><!-- --></canvas>
            <div id="instructions-pane">
                <h3>Instructions:</h3>
                <p>Jam on the spacebar or tap hard on the canvas to control the game or jump.</p>
            </div>
            <div id="score-pane" style="display:none;">
                <p>You ran</p>
                <h3 id="score"><!-- --></h3>
                <p id="highscore"><!-- --></p>
                <p>Hit spacebar or tap to play again.</p>
            </div>
            <div style="display:none;"><!-- hide ugly fake controls on ios 3.x-->
                <audio id="jump"><source src="assets/sounds/jump.mp3" /><source src="assets/sounds/jump.wav" /></audio>
                <audio id="gameover"><source src="assets/sounds/gameover.mp3" /><source src="assets/sounds/gameover.wav" /></audio>
            </div>
        </div>
        <script>

            // cross browser animation racetrack fix
            if (!window.requestAnimationFrame) {
                window.requestAnimationFrame = (window.webkitRequestAnimationFrame ||
                                                window.mozRequestAnimationFrame ||
                                                window.msRequestAnimationFrame ||
                                                window.oRequestAnimationFrame ||
                                                function (callback) {
                                                    return window.setTimeout(callback, 17);
                                                });
            }

            // timing functions
            var start_time = new Date().getTime(), time = getTimer(), elapsed = 0;
            function getTimer () {
                return (new Date().getTime() - start_time);
            }

            // engine
            var ngn = {cnvs: null, ctx: null};

            ngn.sprites = [{name: 'runner', path: 'assets/sprites/runner.png', img: null},{name: 'tiles', path: 'assets/sprites/tiles.png', img: null}];

            ngn.getSpriteByName = function (targetName) {
                for (var n = 0; n < ngn.sprites.length; n++) {
                    if (ngn.sprites[n].name === targetName) {
                        return ngn.sprites[n];
                    }
                }
            };

            ngn.loadSprites = function () {
                var nLoaded = 0;
                for (var i = 0; i < ngn.sprites.length; i++){
                    ngn.sprites[i].img = new Image();
                    ngn.sprites[i].img.onload = function (e) {
                        nLoaded++;
                        if (nLoaded === ngn.sprites.length) {
                            // all images have loaded
                            console.log('All images have been loaded');
                        }
                    };
                    ngn.sprites[i].img.src = ngn.sprites[i].path;
                }
            };

            ngn.setup = function() {
                // grab the canvas and drawing context
                ngn.cnvs = document.getElementById("c");
                if (!ngn.cnvs || !ngn.cnvs.getContext) {
                    return;
                }
                ngn.ctx = ngn.cnvs.getContext("2d");
                if (!ngn.ctx) {
                    return;
                }
                ngn.cnvs.width = 320;
                ngn.cnvs.height = 320;
                //disable smoothing
                ngn.cnvs.style["image-rendering"] = "-webkit-optimize-contrast";
                ngn.ctx.mozImageSmoothingEnabled = false;

                // rest of setup
                // draw a blue background for now
                ngn.ctx.fillStyle = "#69abd9";
                ngn.ctx.fillRect(0, 0, ngn.cnvs.width, ngn.cnvs.height);

                console.log(ngn.getSpriteByName("runner"));
                ngn.loadSprites();

            }// end engine setup

            // start engine if the window loaded
            if (document.readyState === 'complete') {
                ngn.setup();
            } else {
                window.onload = function () {
                    ngn.setup();
                };
            }
        </script>
     </body>
</html>

